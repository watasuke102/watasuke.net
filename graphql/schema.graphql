schema {
  query: Query
  mutation: Mutation
}

input ArticleFilter {
  isFavorite: Boolean
  "This fiels is slug[] which is used for OR search" tags: [String!]
}

type Article {
  slug: String!
  body: String!
  title: String!
  tldr: String!
  tldrReal: String
  tags: [Tag!]!
  isFavorite: Boolean!
  publishedAt: String!
  updatedAt: String!
  isPublished: Boolean!
}

type Monthly {
  body: String!
  year: Int!
  month: Int!
  tldr: String!
  publishedAt: String!
  updatedAt: String!
}

type Mutation {
  newTag(slug: String!, title: String!): String!
  newArticle(slug: String!, title: String!): String!
  updateArticle(slug: String!, title: String!, tldr: String!, tags: [String!]!, isFavorite: Boolean!, body: String!): String!
  publishArticle(slug: String!, shouldCommitAndPush: Boolean!): String!
  renewArticle(slug: String!, commitMessage: String!): String!
  newMonthly(year: Int!, month: Int!): String!
  updateMonthly(year: Int!, month: Int!, tldr: String!, body: String!): String!
  publishMonthly(year: Int!, month: Int!, shouldCommitAndPush: Boolean!): String!
  renewMonthly(year: Int!, month: Int!, commitMessage: String!): String!
  updateProfile(profile: String!): String!
  renewProfile(commitMessage: String!): String!
}

type Neighbor {
  older: Article
  newer: Article
}

type Query {
  allPublicArticles(filter: ArticleFilter): [Article!]!
  allArticles(filter: ArticleFilter): [Article!]!
  article(slug: String!): Article
  neighbors(slug: String!): Neighbor!
  tag(slug: String!): Tag
  allTags: [Tag!]!
  allPublicMonthlies(year: Int): [Monthly!]!
  allMonthlies(year: Int): [Monthly!]!
  monthly(year: Int!, month: Int!): Monthly
  sitedata: Sitedata!
  contentsGitHeadHash: String!
}

type Sitedata {
  profile: String!
  shortProfile: String!
}

type Tag {
  slug: String!
  name: String!
}
